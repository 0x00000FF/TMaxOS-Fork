<refsect1 id='failover'>
    <title>РЕЗЕРВ</title>
    <para>
        Можливість резервування надає змогу модулям обробки автоматично перемикатися
на інші сервери, якщо спроба встановлення з’єднання з поточним сервером
зазнає невдачі.
    </para>
    <refsect2 id='failover_syntax'>
        <title>Синтаксичні конструкції визначення резервного сервера</title>
        <para>
            Список записів серверів, відокремлених комами. Між комами можна
використовувати довільну кількість пробілів. Порядок у списку визначає
пріоритет. У списку може бути будь-яка кількість записів серверів.
        </para>
        <para>
            Для кожного з параметрів налаштування з увімкненим резервним отриманням
існує два варіанти: <emphasis>основний</emphasis> і
<emphasis>резервний</emphasis>. Ідея полягає у тому, що сервери з основного
списку мають вищий пріоритет за резервні сервери, пошук же на резервних
серверах виконується, лише якщо не вдасться з’єднатися з жодним з основних
серверів. Якщо буде вибрано резервний сервер, встановлюється час очікування
у 31 секунду. Після завершення часу очікування SSSD періодично
намагатиметься повторно встановити з’єднання з основними серверами. Якщо
спроба буде успішною, поточний активний резервний сервер буде замінено на
основний.
        </para>
    </refsect2>
    <refsect2 id='failover_mechanism'>
        <title>Механізм визначення резервного сервера</title>
        <para>
            Механізмом резервного використання розрізняються окремі комп’ютери і
служби. Спочатку модуль намагається визначити назву вузла вказаного
комп’ютера. Якщо спроби визначення зазнають невдачі, комп’ютер вважатиметься
від’єднаним від мережі. Подальших спроб встановити з’єднання з цим
комп’ютером для всіх інших служб не виконуватиметься. Якщо вдасться виконати
визначення, модуль зробити спробу встановити з’єднання зі службою на
визначеному комп’ютері. Якщо спроба з’єднання зі службою не призведе до
успіху, непрацездатною вважатиметься лише служба, модуль автоматично
перемкнеться на наступну службу. Комп’ютер служби вважатиметься з’єднаним з
мережею, можливі подальші спроби використання інших служб.
        </para>
        <para>
            Подальші спроби встановлення з’єднання з комп’ютерами або службами,
позначеними як такі, що перебувають поза мережею, буде виконано за певний
проміжок часу. У поточній версії цей проміжок є незмінним і дорівнює 30
секундам.
        </para>
        <para>
            Якщо список комп’ютерів буде вичерпано, основний модуль перейде у режим
автономної роботи і повторюватиме спроби з’єднання кожні 30 секунд.
        </para>
    </refsect2>
    <refsect2 id='failover_tuning'>
        <title>Час очікування на перемикання на резервний ресурс та точне налаштовування</title>
        <para>
            Для визначення сервера для з'єднання достатньо одного запиту DNS або
декількох кроків, зокрема визначення відповідного сайта або спроба
використати декілька назв вузлів у випадку, якщо якісь із налаштованих
серверів недоступні. Складніші сценарії можуть потребувати додаткового часу,
а SSSD треба збалансувати надання достатнього часу для завершення процесу
визначення і використання притомного часу на виконання цього запиту перед
переходом до автономного режиму. Якщо діагностичний журнал SSSD показує, що
під час визначення сервера перевищено час очікування на з'єднання із
працездатним сервером, варто змінити значення параметрів часу очікування.
        </para>
        <para>
            У цьому розділі наведено списки доступних для коригування параметрів. Будь
ласка, ознайомтеся із їхніми описами за допомогою сторінки підручника
<citerefentry>
<refentrytitle>sssd.conf</refentrytitle><manvolnum>5</manvolnum>
</citerefentry>.  <variablelist>
                <varlistentry>
                    <term>
                        dns_resolver_op_timeout
                    </term>
                    <listitem>
                        <para>
                            Наскільки довго SSSD обмінюватиметься інформацією із окремим сервером DNS.
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>
                        dns_resolver_timeout
                    </term>
                    <listitem>
                        <para>
                            Наскільки довго має чекати SSSD на визначення резервної служби надання
даних. На внутрішньому рівні визначення такої служби може включати декілька
кроків, зокрема визначення адрес запитів DNS SRV або пошук розташування
сайта.
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
        </para>
        <para>
            For LDAP-based providers, the resolve operation is performed as part of an
LDAP connection operation. Therefore, also the
<quote>ldap_opt_timeout></quote> timeout should be set to a larger value
than <quote>dns_resolver_timeout</quote> which in turn should be set to a
larger value than <quote>dns_resolver_op_timeout</quote>.
        </para>
    </refsect2>
</refsect1>
